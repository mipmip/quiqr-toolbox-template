const fs = require('fs')

var text = fs.readFileSync("./diet_keepIcons.txt", "utf-8");
var keepArr = text.split("\n")
keepArr = keepArr.filter(function(entry) { return entry.trim() != ''; });
keepArr = keepArr.concat(keepArr.map(function(entry) { return entry+"Border" }));
keepArr = keepArr.concat(keepArr.map(function(entry) { return entry+"Outlined" }));
console.log(keepArr)

const directory = 'node_modules/@mui/icons-material'

fs.rmSync(directory+"/"+'esm', { recursive: true, force: true });

fs.readdir(directory, (err, files) => {
  files.forEach(file => {
    const isdir = fs.lstatSync(directory+'/'+file).isDirectory();
    if(!isdir && !keepArr.includes(file.split('.')[0])){
      fs.unlinkSync( directory + "/" + file );
    }
  });
});
